# build image

docker build -t kittipol/baac-api:$(git --git-dir ./src/.git rev-parse --short HEAD) .


# run image

docker run -d -it -p 7800:8080 --name=baac-api kittipol/baac-api:$(git --git-dir ./src/.git rev-parse --short HEAD)


# remote into container

docker exec -it baac-api /bin/sh


# destroy container

docker stop baac-api; docker rm baac-api


# curl test

curl -I localhost:7800


# image export

docker save kittipol/baac-api:$(git --git-dir ./src/.git rev-parse --short HEAD) > ./images/kittipol-baac-api-$(git --git-dir ./src/.git rev-parse --short HEAD).tar


# load image

docker load < kittipol-baac-api-$(git --git-dir ./src/.git rev-parse --short HEAD).tar

# one step update

docker build -t kittipol/baac-api:$(git --git-dir ./src/.git rev-parse --short HEAD) . && \
docker stop baac-api; docker rm baac-api && \
docker run -d -it -p 7800:8080 --name=baac-api kittipol/baac-api:$(git --git-dir ./src/.git rev-parse --short HEAD)